---
ms.date: 2017-06-12
author: eslesar
ms.topic: conceptual
keywords: dsc,powershell,configuration,setup
title: "Gestionnaire de configuration local (LCM) de DSK Windows PowerShell 4.0"
ms.openlocfilehash: 2e6e4731bdf6d7de6d13fc7f9b81698a192247e4
ms.sourcegitcommit: 75f70c7df01eea5e7a2c16f9a3ab1dd437a1f8fd
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/12/2017
---
# <a name="windows-powershell-40-desired-state-configuration-local-configuration-manager-lcm"></a><span data-ttu-id="323f9-103">Gestionnaire de configuration local (LCM) de DSK Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="323f9-103">Windows PowerShell 4.0 Desired State Configuration Local Configuration Manager (LCM)</span></span>

><span data-ttu-id="323f9-104">S’applique à : Windows PowerShell 4.0, Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="323f9-104">Applies To: Windows PowerShell 4.0, Windows PowerShell 5.0</span></span>

<span data-ttu-id="323f9-105">Le Gestionnaire de configuration local (ou « LCM ») est le moteur de la fonctionnalité DSC (Desired State Configuration) de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="323f9-105">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span> <span data-ttu-id="323f9-106">Exécuté sur tous les nœuds cibles, il est chargé d’appeler les ressources de configuration contenues dans un script de configuration DSC.</span><span class="sxs-lookup"><span data-stu-id="323f9-106">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span> <span data-ttu-id="323f9-107">Cette rubrique répertorie les propriétés du Gestionnaire de configuration local et explique comment modifier les paramètres du Gestionnaire de configuration local sur un nœud cible.</span><span class="sxs-lookup"><span data-stu-id="323f9-107">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="323f9-108">Propriétés du Gestionnaire de configuration local</span><span class="sxs-lookup"><span data-stu-id="323f9-108">Local Configuration Manager properties</span></span>
<span data-ttu-id="323f9-109">Vous pouvez définir ou récupérer les différentes propriétés du Gestionnaire de configuration local décrites ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="323f9-109">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>
 
* <span data-ttu-id="323f9-110">**AllowModuleOverwrite** : indique si vous autorisez le remplacement des configurations existantes sur le nœud cible par les nouvelles configurations téléchargées du serveur de configuration.</span><span class="sxs-lookup"><span data-stu-id="323f9-110">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration server are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="323f9-111">Les valeurs possibles sont True et False.</span><span class="sxs-lookup"><span data-stu-id="323f9-111">Possible values are True and False.</span></span>
* <span data-ttu-id="323f9-112">**CertificateID** : empreinte d’un certificat utilisée pour sécuriser les informations d’identification transmises dans une configuration.</span><span class="sxs-lookup"><span data-stu-id="323f9-112">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="323f9-113">Pour plus d’informations, consultez [Sécuriser les informations d’identification dans DSC Windows PowerShell](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="323f9-113">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx).</span></span>
* <span data-ttu-id="323f9-114">**ConfigurationID** : indique le GUID utilisé pour obtenir un fichier de configuration spécifique d’un serveur configuré comme serveur collecteur.</span><span class="sxs-lookup"><span data-stu-id="323f9-114">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a server set up as a “pull” server.</span></span> <span data-ttu-id="323f9-115">Le GUID permet d’identifier de façon unique le fichier de configuration à obtenir.</span><span class="sxs-lookup"><span data-stu-id="323f9-115">The GUID ensures that the correct configuration file is accessed.</span></span>
* <span data-ttu-id="323f9-116">**ConfigurationMode** : spécifie de quelle façon le Gestionnaire de configuration local applique réellement la configuration aux nœuds cibles.</span><span class="sxs-lookup"><span data-stu-id="323f9-116">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="323f9-117">Cette propriété peut avoir les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="323f9-117">It can take the following values:</span></span>
    - <span data-ttu-id="323f9-118">**ApplyOnly** : cette valeur indique à DSC d’appliquer la configuration et de ne faire aucune autre opération, sauf si vous transmettez une nouvelle configuration directement au nœud cible (mode « push ») ou, dans le cas où vous avez configuré un serveur collecteur, si DSC détecte une nouvelle configuration en interrogeant ce serveur (mode « pull »).</span><span class="sxs-lookup"><span data-stu-id="323f9-118">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node (“push”) or if you have configured a “pull” server and DSC discovers a new configuration when it checks with the “pull” server.</span></span> <span data-ttu-id="323f9-119">Si la configuration du nœud cible diffère de la configuration initiale, aucune action particulière n’est effectuée.</span><span class="sxs-lookup"><span data-stu-id="323f9-119">If the target node’s configuration drifts, no action is taken.</span></span>
    - <span data-ttu-id="323f9-120">**ApplyAndMonitor** : cette valeur (valeur par défaut) indique à DSC d’appliquer chaque nouvelle configuration que vous avez transmise directement au nœud cible ou qui a été détectée sur un serveur collecteur.</span><span class="sxs-lookup"><span data-stu-id="323f9-120">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a “pull” server.</span></span> <span data-ttu-id="323f9-121">Après l’application de la nouvelle configuration, si la configuration du nœud cible diffère du fichier de configuration, DSC signale l’écart dans les journaux.</span><span class="sxs-lookup"><span data-stu-id="323f9-121">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="323f9-122">Pour plus d’informations sur la journalisation de DSC, consultez [Utilisation des journaux des événements pour diagnostiquer les erreurs de configuration de l’état souhaité](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="323f9-122">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
    - <span data-ttu-id="323f9-123">**ApplyAndAutoCorrect** : cette valeur indique à DSC d’appliquer chaque nouvelle configuration que vous avez transmise directement au nœud cible ou qui a été détectée sur un serveur collecteur.</span><span class="sxs-lookup"><span data-stu-id="323f9-123">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a “pull” server.</span></span> <span data-ttu-id="323f9-124">Après l’application de la nouvelle configuration, si la configuration du nœud cible diffère du fichier de configuration, DSC signale l’écart dans les journaux, puis tente de modifier la configuration du nœud cible pour la rendre conforme au fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="323f9-124">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
* <span data-ttu-id="323f9-125">**ConfigurationModeFrequencyMins** : indique la fréquence (en minutes) à laquelle l’application en arrière-plan de DSC tente d’appliquer la configuration actuelle sur le nœud cible.</span><span class="sxs-lookup"><span data-stu-id="323f9-125">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="323f9-126">La valeur par défaut est 15.</span><span class="sxs-lookup"><span data-stu-id="323f9-126">The default value is 15.</span></span> <span data-ttu-id="323f9-127">Cette valeur peut être définie conjointement avec RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="323f9-127">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="323f9-128">Quand la propriété RefreshMode est définie sur « Pull », le nœud cible interroge le serveur de configuration à la fréquence définie par RefreshFrequencyMins et télécharge la configuration actuelle.</span><span class="sxs-lookup"><span data-stu-id="323f9-128">When RefreshMode is set to PULL, the target node contacts the configuration server at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="323f9-129">Quelle que soit la valeur de RefreshMode, le moteur de cohérence applique la dernière configuration téléchargée sur le nœud cible, à la fréquence définie par ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="323f9-129">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="323f9-130">La valeur de RefreshFrequencyMins doit être un nombre entier multiple de la valeur de ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="323f9-130">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
* <span data-ttu-id="323f9-131">**Credential** : indique les informations d’identification (comme avec Get-Credential) nécessaires pour accéder à des ressources distantes, par exemple, pour interroger le serveur de configuration.</span><span class="sxs-lookup"><span data-stu-id="323f9-131">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration server.</span></span>
* <span data-ttu-id="323f9-132">**DownloadManagerCustomData** : désigne un tableau qui contient des données personnalisées spécifiques au Gestionnaire de téléchargement.</span><span class="sxs-lookup"><span data-stu-id="323f9-132">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
* <span data-ttu-id="323f9-133">**DownloadManagerName** : indique le nom du Gestionnaire de téléchargement des configurations et des modules.</span><span class="sxs-lookup"><span data-stu-id="323f9-133">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
* <span data-ttu-id="323f9-134">**RebootNodeIfNeeded** : certaines modifications de la configuration sur un nœud cible peuvent nécessiter un redémarrage de ce nœud pour être appliquées.</span><span class="sxs-lookup"><span data-stu-id="323f9-134">**RebootNodeIfNeeded**: Certain configuration changes on a target node might require it to be restarted for the changes to be applied.</span></span> <span data-ttu-id="323f9-135">Si cette propriété est définie sur **True**, le nœud est redémarré automatiquement dès la fin de l’application de la configuration, sans avertissement préalable.</span><span class="sxs-lookup"><span data-stu-id="323f9-135">With the value **True**, this property will restart the node as soon as the configuration has been completely applies, without further warning.</span></span> <span data-ttu-id="323f9-136">Si elle est définie sur **False** (valeur par défaut), la configuration est appliquée, mais le nœud doit être redémarré manuellement pour que les modifications prennent effet.</span><span class="sxs-lookup"><span data-stu-id="323f9-136">If **False** (the default value), the configuration will be completed, but the node must be restarted manually for the changes to take effect.</span></span>
* <span data-ttu-id="323f9-137">**RefreshFrequencyMins** : propriété à définir si vous avez configuré un serveur collecteur.</span><span class="sxs-lookup"><span data-stu-id="323f9-137">**RefreshFrequencyMins**: Used when you have set up a “pull” server.</span></span> <span data-ttu-id="323f9-138">Elle indique la fréquence (en minutes) à laquelle le Gestionnaire de configuration local interroge un serveur collecteur pour télécharger la configuration actuelle.</span><span class="sxs-lookup"><span data-stu-id="323f9-138">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a “pull” server to download the current configuration.</span></span> <span data-ttu-id="323f9-139">Cette valeur peut être définie conjointement avec ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="323f9-139">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="323f9-140">Quand la propriété RefreshMode est définie sur « Pull », le nœud cible interroge le serveur collecteur à la fréquence définie par RefreshFrequencyMins et télécharge la configuration actuelle.</span><span class="sxs-lookup"><span data-stu-id="323f9-140">When RefreshMode is set to PULL, the target node contacts the “pull” server at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="323f9-141">À la fréquence définie par ConfigurationModeFrequencyMins, le moteur de cohérence applique ensuite la dernière configuration téléchargée sur le nœud cible.</span><span class="sxs-lookup"><span data-stu-id="323f9-141">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="323f9-142">Le système arrondit la valeur de RefreshFrequencyMins si elle n’est pas un nombre entier multiple de la valeur de ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="323f9-142">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="323f9-143">La valeur par défaut est 30.</span><span class="sxs-lookup"><span data-stu-id="323f9-143">The default value is 30.</span></span>
* <span data-ttu-id="323f9-144">**RefreshMode** : les valeurs possibles sont **Push** (valeur par défaut) et **Pull**.</span><span class="sxs-lookup"><span data-stu-id="323f9-144">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="323f9-145">Dans une configuration en mode « push », vous devez créer un fichier de configuration sur chaque nœud cible, avec n’importe quel ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="323f9-145">In the “push” configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="323f9-146">En mode « pull », vous devez configurer un serveur collecteur que le Gestionnaire de configuration local peut interroger pour obtenir les fichiers de configuration.</span><span class="sxs-lookup"><span data-stu-id="323f9-146">In the “pull” mode, you must set up a “pull” server for Local Configuration Manager to contact and access the configuration files.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="323f9-147">Exemple de mise à jour des paramètres du Gestionnaire de configuration local</span><span class="sxs-lookup"><span data-stu-id="323f9-147">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="323f9-148">Pour mettre à jour les paramètres du Gestionnaire de configuration local d’un nœud cible, ajoutez un bloc **LocalConfigurationManager** au bloc du nœud dans un script de configuration, comme indiqué dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="323f9-148">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node “Server001”
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullServer/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"  
```

<span data-ttu-id="323f9-149">L’exécution du script dans l’exemple ci-dessus crée un fichier MOF qui spécifie et contient les paramètres souhaités.</span><span class="sxs-lookup"><span data-stu-id="323f9-149">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span> <span data-ttu-id="323f9-150">Pour appliquer les paramètres, utilisez l’applet de commande **Set-DscLocalConfigurationManager**, comme dans l’exemple qui suit.</span><span class="sxs-lookup"><span data-stu-id="323f9-150">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> <span data-ttu-id="323f9-151">**Remarque** : Pour le paramètre **Path**, vous devez spécifier le même chemin que celui que vous avez spécifié pour le paramètre **OutputPath** dans l’appel de la configuration de l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="323f9-151">**Note**: For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="323f9-152">Pour afficher les paramètres actuels du Gestionnaire de configuration local, utilisez l’applet de commande **Get-DscLocalConfigurationManager**.</span><span class="sxs-lookup"><span data-stu-id="323f9-152">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span> <span data-ttu-id="323f9-153">Si vous appelez cette applet de commande sans spécifier de paramètre, elle affiche par défaut les paramètres du Gestionnaire de configuration local pour le nœud sur lequel vous l’exécutez.</span><span class="sxs-lookup"><span data-stu-id="323f9-153">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span> <span data-ttu-id="323f9-154">Pour spécifier un autre nœud, utilisez le paramètre **CimSession** avec cette applet de commande.</span><span class="sxs-lookup"><span data-stu-id="323f9-154">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>

